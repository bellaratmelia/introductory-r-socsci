<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Bella Ratmelia">
  <title>Introductory R for Social Sciences – Data Wrangling with Tidyverse</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-7b5d68ee702dfa4292c5505af09f419d.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-G5L1RGYC4H"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
   
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'analytics_storage': 'denied'
    });
  gtag('config', 'G-G5L1RGYC4H', { 'anonymize_ip': true});
  </script>
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

  <link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Wrangling with Tidyverse</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Bella Ratmelia 
</div>
</div>
</div>

</section>
<section id="todays-outline" class="slide level2">
<h2>Today’s Outline</h2>
<ol type="1">
<li>Loading our data into RStudio environment</li>
<li>Data wrangling with <code>dplyr</code> and <code>tidyr</code> (part of the <code>tidyverse</code> package)</li>
</ol>
</section>
<section id="checklist-when-you-start-rstudio" class="slide level2">
<h2>Checklist when you start RStudio</h2>
<ul>
<li>Navigate to where you create your R project folder for this workshop.</li>
<li>Find a file with <code>.Rproject</code> extension and double-click on it. This will start RStudio and open your project.</li>
<li>Make sure that <code>Environment</code> panel is empty (click on broom icon to clean it up).</li>
<li>Clear the <code>Console</code> and <code>Plots</code> too.</li>
<li>Re-run the <code>library(tidyverse)</code> and <code>read_csv</code> portion in the previous session (the code is also on the next slide if you missed last week’s session)</li>
</ul>
</section>
<section id="refresher-loading-from-csv-into-a-dataframe" class="slide level2">
<h2>Refresher: Loading from CSV into a dataframe</h2>
<p>Use <code>read_csv</code> from <code>readr</code> package (part of <code>tidyverse</code>) to load our World Values Survey data. More information about the data can be found under the <code>Dataset</code> tab in the course website.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># import tidyverse library</span></span>
<span id="cb1-2"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a><span class="co"># read the CSV and save into a dataframe called wvs_data</span></span>
<span id="cb1-5"><a></a>wvs_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/wvs-wave7-sg-ca-nz.csv"</span>)</span>
<span id="cb1-6"><a></a></span>
<span id="cb1-7"><a></a><span class="co"># "peek" at the data, pay attention to the data types!</span></span>
<span id="cb1-8"><a></a><span class="fu">glimpse</span>(wvs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="why-do-we-need-to-clean-our-data" class="slide level2">
<h2>Why do we need to clean our data?</h2>
<ul>
<li class="fragment">Researchers spend 60-80% of their time on data preparation - investing in proper wrangling upfront saves hours of debugging and rework later.</li>
<li class="fragment">Poor data quality costs projects or organizations millions annually(!), and even one misclassified data point can skew entire analyses.</li>
<li class="fragment">Clean data improves the validity of statistical tests and can reveal hidden patterns that aren’t visible in messy datasets</li>
<li class="fragment">Well-documented data cleaning makes research transparent and reproducible, benefiting both future-you and collaborators.</li>
</ul>
</section>
<section id="why-do-it-in-r-cant-i-do-this-on-excel" class="slide level2">
<h2>Why do it in R? Can’t I do this on excel?</h2>
<ul>
<li class="fragment">R code creates a permanent record of exactly what you did - Excel clicks and manual edits are hard to track and reproduce.</li>
<li class="fragment">R handles dates, times, text, and mixed data types much more reliably than Excel.</li>
<li class="fragment">Excel can automatically “correct” your data in unwanted ways (like converting your dates from DDMMYY to MMDDYY)</li>
<li class="fragment">Write the cleaning code once, apply it to multiple datasets or when data updates. Whereas Excel requires manual repetition of the same steps each time.</li>
<li class="fragment">Complex joins, reshaping, and conditional operations that would take many Excel steps can be done in a few lines of R code.</li>
<li class="fragment">R scripts can be easily shared, version controlled, and integrated into reproducible workflows</li>
</ul>
</section>
<section id="what-do-i-need-to-know-before-we-begin" class="slide level2">
<h2>What do I need to know before we begin?</h2>
<ul>
<li class="fragment">Always examine your data first (<code>head()</code>, <code>summary()</code>, <code>str()</code>) before cleaning.</li>
<li class="fragment"><strong>Never overwrite your raw data files</strong></li>
<li class="fragment">Budget extra time for data cleaning - it almost always takes longer than expected!</li>
<li class="fragment">Having a clear understanding of the desired data shape is essential as real data often differs from what you imagine! <strong>Refer to codebook, actual questionnaire, appendix for guidance.</strong></li>
<li class="fragment">Look out for outliers!</li>
<li class="fragment">Remember: Data cleaning techniques differ based on the problems, data type, and the research questions you are trying to answer. Various methods are available, each with its own trade-offs.</li>
</ul>
</section>
<section id="the-tools-were-going-to-use-dplyr-and-tidyr" class="slide level2">
<h2>The tools we’re going to use: dplyr and tidyr</h2>
<ul>
<li><p>Packages from <code>tidyverse</code>. (<a href="https://www.tidyverse.org/">click here to go to the tidyverse homepage</a>)</p></li>
<li><p>Posit have created cheatsheets here! (you can have this open in another tab for reference for this session!)</p>
<ul>
<li><p><a href="https://rstudio.github.io/cheatsheets/html/data-transformation.html">dplyr cheatsheet</a> | <a href="https://rstudio.github.io/cheatsheets/data-transformation.pdf">pdf version</a> (I personally prefer this PDF version since it’s more visual)</p></li>
<li><p><a href="https://rstudio.github.io/cheatsheets/html/tidyr.html">tidyr cheatsheet</a> | <a href="https://rstudio.github.io/cheatsheets/tidyr.pdf">pdf version</a></p></li>
</ul></li>
<li><p>Most of the time, these are the ones that you will use quite often:</p>
<ul>
<li><p><code>drop_na()</code> - remove rows with null values</p></li>
<li><p><code>select()</code> - to select column(s) from a dataframe</p></li>
<li><p><code>filter()</code> - to filter rows based on criteria</p></li>
<li><p><code>mutate()</code> - to compute new columns or edit existing ones</p></li>
<li><p><code>if_else()</code> and <code>case_when()</code> - to be used with mutate when we want to compute/edit columns based on multiple criteria</p></li>
<li><p><code>group_by()</code> and <code>summarize()</code> - group data and summarize each group</p></li>
</ul></li>
</ul>
</section>
<section id="why-are-we-using-tidyverse-is-it-a-must" class="slide level2">
<h2>Why are we using tidyverse? Is it a must?</h2>
<p>It’s not a must, but it’ll be make our job much easier! Key advantages:</p>
<ul>
<li>More ‘English’ looking code and thus more intuitive for beginners</li>
<li>Tidyverse follow consistent syntax patterns - first argument is always the data</li>
<li>Tidyverse gives clearer, more helpful error messages</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="co"># Base R</span></span>
<span id="cb2-2"><a></a>subset_data <span class="ot">&lt;-</span> data[data<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">18</span> <span class="sc">&amp;</span> data<span class="sc">$</span>income <span class="sc">&gt;</span> <span class="dv">50000</span>, <span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"age"</span>, <span class="st">"salary"</span>)]</span>
<span id="cb2-3"><a></a></span>
<span id="cb2-4"><a></a><span class="co"># Tidyverse  </span></span>
<span id="cb2-5"><a></a>subset_data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb2-6"><a></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">18</span>, income <span class="sc">&gt;</span> <span class="dv">50000</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb2-7"><a></a>  <span class="fu">select</span>(name, age, salary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="scenario-data-wrangling-activities-with-wvs-data" class="slide level2 smaller">
<h2>Scenario: Data wrangling activities with WVS data</h2>
<p><strong>Scenario</strong>: We are research assistants analyzing patterns in values and satisfaction across different countries and demographic groups.</p>
<p>Our team has been assigned to explore and get insights on how specific factors (employment, work importance, marital status, political alignment, financial satisfaction, and religiosity) may relate to life satisfaction among different generations (Gen Z, Millennials, Gen X, and Baby Boomer), including how they may differ between the 3 countries.</p>
<p>To ensure the analysis quality, we were instructed to discard incomplete data.</p>
<p>We can break down the tasks as such:</p>
<ol type="1">
<li class="fragment"><p>Remove all rows with missing values (NA)</p></li>
<li class="fragment"><p>Check for duplicates</p></li>
<li class="fragment"><p>Select only the relevant columns: demographic columns, <code>work_importance</code>, <code>life_satisfaction</code>, <code>financial_satisfaction</code>, <code>religiousity</code>, <code>political_scale</code>, <code>marital_status</code>, and <code>employment</code>.</p></li>
<li class="fragment"><p>Filter for respondents aged 18 or older. Optionally, we can then arrange the dataset by age (oldest to youngest)</p></li>
<li class="fragment"><p>Reverse-code <code>importance</code> variables so that higher numbers consistently represent higher levels of the measured construct. In other words, 1 = Not at all important and 4 = Very important.</p></li>
<li class="fragment"><p>Create age groups for each generation: “18-28”, “29-44”, “45-60”, “61+”</p></li>
</ol>
<p>Once we did all of the wrangling above, we can save this “wrangled” version into another CSV</p>
</section>
<section>
<section id="lets-wrangle-our-data" class="title-slide slide level1 center">
<h1>Let’s wrangle our data!</h1>

</section>
<section id="task-1" class="slide level2">
<h2>Task #1</h2>
<blockquote>
<p><strong>A strategy I’d like to recommend:</strong> briefly read over the <code>dplyr</code> + <code>tidyr</code> documentation, either the PDF or HTML version, and have them open on a separate tab so that you can refer to it quickly.</p>
</blockquote>
<p>Remove all rows with empty values (NA) with <code>drop_na()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number of observations after removing NAs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">dim</span>(wvs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6403   16</code></pre>
</div>
</div>
</section>
<section id="interlude-pipe-operator" class="slide level2">
<h2>Interlude: Pipe Operator ( |&gt; )</h2>
<ul>
<li><p>The pipe operator (|&gt;) allows us to chain multiple operations without creating intermediate / temporary dataframes.</p></li>
<li><p>Super handy when we perform several data wrangling tasks using tidyverse in sequence.</p></li>
<li><p>Helps with readability, especially for complex operations.</p></li>
<li><p>Keyboard shortcut: <code>Ctrl</code>+<code>Shift</code>+<code>M</code> on Windows, <code>Cmd</code>+<code>Shift</code>+<code>M</code> on Mac</p></li>
</ul>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Without pipe operator</a></li><li><a href="#tabset-1-2">With pipe operator</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>Notice that we have to create a “temp” dataframes called <code>wvs_data_clean</code> in this method.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>wvs_data <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(wvs_data)</span>
<span id="cb6-2"><a></a>wvs_data_clean <span class="ot">&lt;-</span> <span class="fu">wvs_data_clean</span>(wvs_data, <span class="fu">desc</span>(age))</span>
<span id="cb6-3"><a></a><span class="fu">write_csv</span>(wvs_data_clean, <span class="st">"data-output/wvs-clean.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2">
<p>No “temporary” dataframe needed here! :D</p>
<div class="sourceCode" id="cb7" data-code-overflow="overflow"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a></a>    <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a></a>    <span class="fu">distinct</span>(ID, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a></a>    <span class="fu">write_csv</span>(<span class="st">"data-output/wvs-30plus.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="task-2" class="slide level2">
<h2>Task #2</h2>
<p>Check for duplicates with <code>distinct()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a></a>  <span class="fu">distinct</span>(ID, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(Our data has no duplicates, but this is still a good practice to do, especially if we were combining data from multipe sources)</p>
</section>
<section id="task-3" class="slide level2">
<h2>Task #3:</h2>
<p>Select only the relevant columns: demographic columns, <code>life_satisfaction</code>, <code>work_importance</code>, <code>financial_satisfaction</code>, <code>religiousity</code>, <code>political_scale</code>, <code>marital_status</code>, and <code>employment</code>.</p>
<p>We can achieve this with <code>select()</code>!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a></a>    <span class="fu">select</span>(ID, country, sex, birthyear, age, life_satisfaction, work_importance, financial_satisfaction, religiousity, political_scale, marital_status, employment) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview of the filtered data:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,403
Columns: 12
$ ID                     &lt;dbl&gt; 124070003, 124070004, 124070005, 124070006, 124…
$ country                &lt;chr&gt; "CAN", "CAN", "CAN", "CAN", "CAN", "CAN", "CAN"…
$ sex                    &lt;chr&gt; "Female", "Male", "Female", "Male", "Male", "Ma…
$ birthyear              &lt;dbl&gt; 1944, 1951, 1984, 1975, 1988, 1982, 1981, 1985,…
$ age                    &lt;dbl&gt; 76, 69, 35, 45, 32, 38, 38, 34, 65, 31, 27, 33,…
$ life_satisfaction      &lt;dbl&gt; 5, 8, 9, 7, 1, 7, 9, 6, 7, 6, 7, 10, 8, 10, 6, …
$ work_importance        &lt;dbl&gt; 1, 1, 2, 2, 2, 1, 1, 2, 1, 2, 1, 2, 4, 1, 3, 3,…
$ financial_satisfaction &lt;dbl&gt; 8, 2, 8, 8, 9, 8, 9, 5, 6, 9, 5, 7, 9, 9, 7, 8,…
$ religiousity           &lt;chr&gt; "A religious person", "A religious person", "An…
$ political_scale        &lt;dbl&gt; 10, 5, 2, 8, 6, 6, 7, 5, 6, 4, 5, 4, 1, 7, 2, 8…
$ marital_status         &lt;chr&gt; "Separated", "Married", "Living together as mar…
$ employment             &lt;chr&gt; "Retired/pensioned", "Retired/pensioned", "Part…</code></pre>
</div>
</div>
</section>
<section id="task-4" class="slide level2">
<h2>Task #4:</h2>
<p>Filter for respondents aged 18 or older. Optionally, we can then arrange the dataset by age (oldest to youngest)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a></a>    <span class="fu">filter</span>(age <span class="sc">&gt;=</span> <span class="dv">18</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Checking the structure:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
         ID country sex    birthyear   age life_satisfaction work_importance
      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;           &lt;dbl&gt;
1 124071434 CAN     Male        1927    93                 7               1
2 554070524 NZL     Female      1928    91                 5               4
3 702070265 SGP     Male        1930    90                 8               1
4 124071321 CAN     Female      1931    89                 6               3
5 124073566 CAN     Female      1930    89                 6               4
6 124074356 CAN     Male        1931    89                 8               4
# ℹ 5 more variables: financial_satisfaction &lt;dbl&gt;, religiousity &lt;chr&gt;,
#   political_scale &lt;dbl&gt;, marital_status &lt;chr&gt;, employment &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="task-5" class="slide level2">
<h2>Task #5</h2>
<p>Reverse-code <code>work_importance</code> variables so that higher numbers consistently represent higher levels of the measured construct. In other words, 1 = Not at all important and 4 = Very important.</p>
<p>We can achieve this with <code>mutate()</code>!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a></a>    <span class="fu">mutate</span>(<span class="at">work_importance_r =</span> <span class="dv">5</span> <span class="sc">-</span> work_importance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview of age groups:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 2
  work_importance_r work_importance
              &lt;dbl&gt;           &lt;dbl&gt;
1                 4               1
2                 1               4
3                 4               1
4                 2               3
5                 1               4
# ℹ 6,398 more rows</code></pre>
</div>
</div>
</section>
<section id="task-6" class="slide level2">
<h2>Task #6</h2>
<p>Create age groups for each generation: “18-28”, “29-44”, “45-60”, “61+”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a></a>    <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb15-3"><a></a>        age <span class="sc">&lt;=</span> <span class="dv">28</span> <span class="sc">~</span> <span class="st">"18-28"</span>,</span>
<span id="cb15-4"><a></a>        age <span class="sc">&lt;=</span> <span class="dv">44</span> <span class="sc">~</span> <span class="st">"29-44"</span>,</span>
<span id="cb15-5"><a></a>        age <span class="sc">&lt;=</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">"45-60"</span>,</span>
<span id="cb15-6"><a></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"61+"</span></span>
<span id="cb15-7"><a></a>    ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview of age groups:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 2
    age age_group
  &lt;dbl&gt; &lt;chr&gt;    
1    93 61+      
2    91 61+      
3    90 61+      
4    89 61+      
# ℹ 6,399 more rows</code></pre>
</div>
</div>
</section>
<section id="checkpoint-1---saving-our-hard-work-into-a-csv-file" class="slide level2">
<h2>Checkpoint 1 - saving our hard work into a CSV file</h2>
<p>We have done some cleaning! Let’s save this cleaned data into a separate CSV file called “wvs_cleaned_v1.csv”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>wvs_data <span class="sc">|&gt;</span> <span class="fu">write_csv</span>(<span class="st">"data-output/wvs_cleaned_v1.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check the data output folder to make sure the CSV is created!</p>
</section>
<section id="simple-descriptive-analysis" class="slide level2">
<h2>Simple descriptive analysis</h2>
<p>Once we are done with the wrangling part, we can proceed with simple descriptive analysis!</p>
<ul>
<li class="fragment"><p>Prep: Before we proceed further, convert the appropriate categorical variables (country, religiousity, sex, marital_status, employment) to <strong>Factor</strong></p></li>
<li class="fragment"><p>Analysis 1: Generate summary statistics of life_satisfaction grouped by country</p></li>
<li class="fragment"><p>Analysis 2: Create a new column called <code>satisfaction_group</code> that indicate whether each respondent has higher or lower than average <code>life_satisfaction</code></p></li>
<li class="fragment"><p>Analysis 3: Reshape the data to show average satisfaction scores by country and age group</p></li>
</ul>
</section>
<section id="prep-before-analysis-convert-to-factors" class="slide level2">
<h2>Prep before analysis: convert to factors</h2>
<p>Let’s use the <code>wvs_cleaned</code> dataframe for this task.</p>
<p>Convert the appropriate categorical variables (country, religiousity, sex, marital_status, employment) to <strong>Factor</strong>.</p>
<p>We can do this with <code>mutate()</code> and <code>as_factor()</code> from forcats, another sub-package within tidyverse.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>wvs_cleaned <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data-output/wvs_cleaned_v1.csv"</span>)</span>
<span id="cb18-2"><a></a>wvs_cleaned <span class="ot">&lt;-</span> wvs_cleaned <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a></a>    <span class="fu">mutate</span>(</span>
<span id="cb18-4"><a></a>        <span class="at">country =</span> <span class="fu">as_factor</span>(country),</span>
<span id="cb18-5"><a></a>        <span class="at">religiousity =</span> <span class="fu">as_factor</span>(religiousity),</span>
<span id="cb18-6"><a></a>        <span class="at">sex =</span> <span class="fu">as_factor</span>(sex),</span>
<span id="cb18-7"><a></a>        <span class="at">marital_status =</span> <span class="fu">as_factor</span>(marital_status),</span>
<span id="cb18-8"><a></a>        <span class="at">employment =</span> <span class="fu">as_factor</span>(employment)</span>
<span id="cb18-9"><a></a>    )</span>
<span id="cb18-10"><a></a></span>
<span id="cb18-11"><a></a><span class="co"># check conversion result</span></span>
<span id="cb18-12"><a></a><span class="fu">str</span>(wvs_cleaned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<p>Rstudio may auto-suggest <code>as.factor()</code> from base R. You can use this as well, but <code>as_factor()</code> is preferred since we are using tidyverse approach.</p>
</section>
<section id="prep-before-analysis-convert-to-factors-output" class="slide level2 output-location-slide"><h2>Prep before analysis: convert to factors</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code>tibble [6,403 × 14] (S3: tbl_df/tbl/data.frame)
 $ ID                    : num [1:6403] 1.24e+08 5.54e+08 7.02e+08 1.24e+08 1.24e+08 ...
 $ country               : Factor w/ 3 levels "CAN","NZL","SGP": 1 2 3 1 1 1 2 1 1 2 ...
 $ sex                   : Factor w/ 2 levels "Male","Female": 1 2 1 2 2 1 2 1 2 1 ...
 $ birthyear             : num [1:6403] 1927 1928 1930 1931 1930 ...
 $ age                   : num [1:6403] 93 91 90 89 89 89 89 88 88 88 ...
 $ life_satisfaction     : num [1:6403] 7 5 8 6 6 8 9 8 8 10 ...
 $ work_importance       : num [1:6403] 1 4 1 3 4 4 2 1 4 2 ...
 $ financial_satisfaction: num [1:6403] 7 5 9 9 8 8 10 10 5 10 ...
 $ religiousity          : Factor w/ 4 levels "Not a religious person",..: 1 2 2 1 1 2 2 2 2 2 ...
 $ political_scale       : num [1:6403] 5 3 3 2 5 5 8 10 5 5 ...
 $ marital_status        : Factor w/ 6 levels "Widowed","Single",..: 1 1 1 1 2 3 1 1 1 1 ...
 $ employment            : Factor w/ 8 levels "Part time","Retired/pensioned",..: 1 2 2 2 2 2 2 2 2 2 ...
 $ work_importance_r     : num [1:6403] 4 1 4 2 1 1 3 4 1 3 ...
 $ age_group             : chr [1:6403] "61+" "61+" "61+" "61+" ...</code></pre>
</div>
</div></section><section id="prep-before-analysis-convert-to-factors-shortcut-ver." class="slide level2">
<h2>Prep before analysis: convert to factors (shortcut ver.)</h2>
<p>If we have a lot of columns to convert, that might be troublesome to type! This is where <code>across()</code> can come in handy.</p>
<p>Let’s first define a character vector that contains the names of columns we plan to convert.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>columns_to_convert <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"religiousity"</span>, <span class="st">"sex"</span>, <span class="st">"marital_status"</span>, <span class="st">"employment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will use this vector with <code>mutate()</code> and <code>across()</code>. We tell tidyverse to convert all of the columns with the help of <code>all_of()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>wvs_cleaned <span class="ot">&lt;-</span> wvs_cleaned <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(columns_to_convert), as_factor))</span>
<span id="cb21-3"><a></a></span>
<span id="cb21-4"><a></a><span class="co"># check conversion result</span></span>
<span id="cb21-5"><a></a><span class="fu">str</span>(wvs_cleaned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<p><code>across()</code> is used for applying the same function to multiple columns in a single <code>mutate()</code> or <code>summarise()</code> operation.</p>
</section>
<section id="prep-before-analysis-convert-to-factors-shortcut-ver.-output" class="slide level2 output-location-slide"><h2>Prep before analysis: convert to factors (shortcut ver.)</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code>tibble [6,403 × 14] (S3: tbl_df/tbl/data.frame)
 $ ID                    : num [1:6403] 1.24e+08 5.54e+08 7.02e+08 1.24e+08 1.24e+08 ...
 $ country               : Factor w/ 3 levels "CAN","NZL","SGP": 1 2 3 1 1 1 2 1 1 2 ...
 $ sex                   : Factor w/ 2 levels "Male","Female": 1 2 1 2 2 1 2 1 2 1 ...
 $ birthyear             : num [1:6403] 1927 1928 1930 1931 1930 ...
 $ age                   : num [1:6403] 93 91 90 89 89 89 89 88 88 88 ...
 $ life_satisfaction     : num [1:6403] 7 5 8 6 6 8 9 8 8 10 ...
 $ work_importance       : num [1:6403] 1 4 1 3 4 4 2 1 4 2 ...
 $ financial_satisfaction: num [1:6403] 7 5 9 9 8 8 10 10 5 10 ...
 $ religiousity          : Factor w/ 4 levels "Not a religious person",..: 1 2 2 1 1 2 2 2 2 2 ...
 $ political_scale       : num [1:6403] 5 3 3 2 5 5 8 10 5 5 ...
 $ marital_status        : Factor w/ 6 levels "Widowed","Single",..: 1 1 1 1 2 3 1 1 1 1 ...
 $ employment            : Factor w/ 8 levels "Part time","Retired/pensioned",..: 1 2 2 2 2 2 2 2 2 2 ...
 $ work_importance_r     : num [1:6403] 4 1 4 2 1 1 3 4 1 3 ...
 $ age_group             : chr [1:6403] "61+" "61+" "61+" "61+" ...</code></pre>
</div>
</div></section><section id="analysis-1---summary-stats-of-life_satisfaction-for-each-country" class="slide level2">
<h2>Analysis 1 - summary stats of life_satisfaction for each country</h2>
<p>Generate summary statistics such as count (n), mean, median, and standard deviation of life_satisfaction grouped by country.</p>
<p>We can achieve this with <code>group_by()</code> and <code>summarise()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>wvs_data <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a></a>    <span class="fu">group_by</span>(country, age_group) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a></a>    <span class="fu">summarise</span>(</span>
<span id="cb23-4"><a></a>        <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb23-5"><a></a>        <span class="at">mean_satisfaction =</span> <span class="fu">mean</span>(life_satisfaction),</span>
<span id="cb23-6"><a></a>        <span class="at">median_satisfaction =</span> <span class="fu">median</span>(life_satisfaction),</span>
<span id="cb23-7"><a></a>        <span class="at">sd_satisfaction =</span> <span class="fu">sd</span>(life_satisfaction)</span>
<span id="cb23-8"><a></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb23-9"><a></a>    <span class="fu">arrange</span>(country, <span class="fu">desc</span>(mean_satisfaction))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<p><em>What if we want to save this into a CSV? What if we also want to group by country AND age_group?</em></p>
</section>
<section id="analysis-1---summary-stats-of-life_satisfaction-for-each-country-output" class="slide level2 output-location-slide"><h2>Analysis 1 - summary stats of life_satisfaction for each country</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 6
# Groups:   country [3]
   country age_group     n mean_satisfaction median_satisfaction sd_satisfaction
   &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt;             &lt;dbl&gt;               &lt;dbl&gt;           &lt;dbl&gt;
 1 CAN     61+        1013              7.55                   8            1.59
 2 CAN     29-44      1232              6.99                   7            1.80
 3 CAN     45-60      1061              6.92                   7            1.87
 4 CAN     18-28       712              6.60                   7            1.86
 5 NZL     61+         292              7.96                   8            1.66
 6 NZL     45-60       222              7.38                   8            1.90
 7 NZL     29-44       119              7.32                   8            1.69
 8 NZL     18-28        27              6.70                   7            1.98
 9 SGP     61+         418              7.17                   7            1.84
10 SGP     29-44       511              7.09                   7            1.70
11 SGP     45-60       550              7.05                   7            1.83
12 SGP     18-28       246              6.85                   7            1.68</code></pre>
</div>
</div></section><section id="analysis-2---how-many-has-below-and-average-life_satisfaction" class="slide level2">
<h2>Analysis 2 - How many has below and average life_satisfaction?</h2>
<p>Create a new column called <code>satisfaction_group</code> that indicate whether each respondent has higher or lower than average <code>life_satisfaction</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>mean_satisfaction <span class="ot">&lt;-</span> <span class="fu">mean</span>(wvs_data<span class="sc">$</span>life_satisfaction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-2"><a></a></span>
<span id="cb25-3"><a></a>wvs_data <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a></a>    <span class="fu">mutate</span>(<span class="at">satisfaction_group =</span> <span class="fu">if_else</span>(</span>
<span id="cb25-5"><a></a>        life_satisfaction <span class="sc">&gt;</span> mean_satisfaction, <span class="co"># the condition to evaluate</span></span>
<span id="cb25-6"><a></a>        <span class="st">"higher"</span>, <span class="co"># if condition is fulfilled, do this</span></span>
<span id="cb25-7"><a></a>        <span class="st">"lower"</span> <span class="co"># otherwise, do this</span></span>
<span id="cb25-8"><a></a>    )) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="analysis-2---how-many-has-below-and-average-life_satisfaction-output" class="slide level2 output-location-slide"><h2>Analysis 2 - How many has below and average life_satisfaction?</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 15
          ID country sex    birthyear   age life_satisfaction work_importance
       &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;           &lt;dbl&gt;
 1 124071434 CAN     Male        1927    93                 7               1
 2 554070524 NZL     Female      1928    91                 5               4
 3 702070265 SGP     Male        1930    90                 8               1
 4 124071321 CAN     Female      1931    89                 6               3
 5 124073566 CAN     Female      1930    89                 6               4
 6 124074356 CAN     Male        1931    89                 8               4
 7 554070216 NZL     Female      1930    89                 9               2
 8 124070295 CAN     Male        1932    88                 8               1
 9 124072193 CAN     Female      1958    88                 8               4
10 554070038 NZL     Male        1931    88                10               2
# ℹ 6,393 more rows
# ℹ 8 more variables: financial_satisfaction &lt;dbl&gt;, religiousity &lt;chr&gt;,
#   political_scale &lt;dbl&gt;, marital_status &lt;chr&gt;, employment &lt;chr&gt;,
#   work_importance_r &lt;dbl&gt;, age_group &lt;chr&gt;, satisfaction_group &lt;chr&gt;</code></pre>
</div>
</div></section><section id="analysis-3---whats-the-average-satisfaction-scores-for-each-country-and-age-group" class="slide level2">
<h2>Analysis 3 - What’s the average satisfaction scores for each country and age group?</h2>
<p>Show the average satisfaction scores by country and age group in wide data format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>wvs_data <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a></a>    <span class="fu">group_by</span>(country, age_group) <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a></a>    <span class="fu">summarise</span>(</span>
<span id="cb27-4"><a></a>        <span class="at">avg_satisfaction =</span> <span class="fu">mean</span>(life_satisfaction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-5"><a></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb27-6"><a></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb27-7"><a></a>        <span class="at">names_from =</span> age_group,</span>
<span id="cb27-8"><a></a>        <span class="at">values_from =</span> avg_satisfaction</span>
<span id="cb27-9"><a></a>    ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
# Groups:   country [3]
  country `18-28` `29-44` `45-60` `61+`
  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 CAN        6.60    6.99    6.92  7.55
2 NZL        6.70    7.32    7.38  7.96
3 SGP        6.85    7.09    7.05  7.17</code></pre>
</div>
</div>
</section>
<section id="long-vs-wide-data" class="slide level2">
<h2>Long vs Wide Data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Long data:</strong></p>
<ul>
<li><p>Each row is a unique observation.</p></li>
<li><p>There is a separate column indicating the variable or type of measurements</p></li>
<li><p>This format is more “understandable” by R, more suitable for visualizations.</p></li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Wide data:</strong></p>
<ul>
<li><p>Each row is a value in variables.</p></li>
<li><p>Each column is a value in variables –&gt; the more values you have, the “wider” is the data</p></li>
<li><p>This format is more intuitive for humans!</p></li>
</ul>
</div></div>
</section>
<section id="long-vs-wide-data-examples" class="slide level2">
<h2>Long vs Wide Data: Examples</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Long data:</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-bordered caption-top" data-quarto-postprocess="true" style="font-size: 85%; margin-left: auto; margin-right: auto;">
<caption>Observations (Long)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age_group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CAN</td>
<td style="text-align: left;">18-28</td>
<td style="text-align: right;">712</td>
</tr>
<tr class="even">
<td style="text-align: left;">CAN</td>
<td style="text-align: left;">29-44</td>
<td style="text-align: right;">1232</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CAN</td>
<td style="text-align: left;">45-60</td>
<td style="text-align: right;">1061</td>
</tr>
<tr class="even">
<td style="text-align: left;">CAN</td>
<td style="text-align: left;">61+</td>
<td style="text-align: right;">1013</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NZL</td>
<td style="text-align: left;">18-28</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">NZL</td>
<td style="text-align: left;">29-44</td>
<td style="text-align: right;">119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NZL</td>
<td style="text-align: left;">45-60</td>
<td style="text-align: right;">222</td>
</tr>
<tr class="even">
<td style="text-align: left;">NZL</td>
<td style="text-align: left;">61+</td>
<td style="text-align: right;">292</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">18-28</td>
<td style="text-align: right;">246</td>
</tr>
<tr class="even">
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">29-44</td>
<td style="text-align: right;">511</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">45-60</td>
<td style="text-align: right;">550</td>
</tr>
<tr class="even">
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">61+</td>
<td style="text-align: right;">418</td>
</tr>
</tbody>
</table>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Wide data:</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-bordered caption-top" data-quarto-postprocess="true" style="font-size: 85%; margin-left: auto; margin-right: auto;">
<caption>Observations (Wide)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">18-28</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">29-44</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">45-60</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">61+</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CAN</td>
<td style="text-align: right;">712</td>
<td style="text-align: right;">1232</td>
<td style="text-align: right;">1061</td>
<td style="text-align: right;">1013</td>
</tr>
<tr class="even">
<td style="text-align: left;">NZL</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">222</td>
<td style="text-align: right;">292</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SGP</td>
<td style="text-align: right;">246</td>
<td style="text-align: right;">511</td>
<td style="text-align: right;">550</td>
<td style="text-align: right;">418</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div>
</section>
<section id="bonus-deleting-columns-from-dataframe" class="slide level2">
<h2>Bonus: Deleting columns from dataframe</h2>
<p>Let’s say I have this column called <code>wrong_column</code> that I want to remove:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">wrong_column =</span> <span class="st">"random values"</span>)</span>
<span id="cb29-2"><a></a>wvs_data <span class="sc">|&gt;</span> <span class="fu">select</span>(country, wrong_column) <span class="sc">|&gt;</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 2
  country wrong_column 
  &lt;chr&gt;   &lt;chr&gt;        
1 CAN     random values
2 NZL     random values
3 SGP     random values
# ℹ 6,400 more rows</code></pre>
</div>
</div>
</section>
<section id="remove-the-wrong-column-with-subset--" class="slide level2">
<h2>Remove the wrong column with subset <code>-</code>:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a></a>    <span class="fu">select</span>(<span class="sc">-</span>wrong_column)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 1
  country
  &lt;chr&gt;  
1 CAN    
2 NZL    
3 SGP    
# ℹ 6,400 more rows</code></pre>
</div>
</div>
</section></section>
<section id="recap" class="title-slide slide level1 center">
<h1>Recap</h1>
<ul>
<li class="fragment"><p>Import and read data into RStudio: Load external data files (like CSV or Excel) into R using functions such as <code>read_csv()</code> to make the data available for analysis.</p></li>
<li class="fragment"><p>Data wrangling with dplyr and tidyr (part of the tidyverse package): Use tidyverse functions to tidy and reshape datasets and perform tasks like selecting, filtering, and summarizing data.</p></li>
<li class="fragment"><p>Remove all rows with missing values (NA) and check for duplicates: Delete rows containing missing data using <code>na.omit()</code> and identify or remove duplicate rows with functions like <code>distinct()</code>.</p></li>
<li class="fragment"><p>Select only the relevant columns: Use <code>select()</code> to keep only the columns needed for the analysis, focusing on important variables.</p></li>
<li class="fragment"><p>Filter data based on criterion and arrange data: Apply <code>filter()</code> to keep rows meeting specific conditions and use <code>arrange()</code> to sort data by one or more columns.</p></li>
<li class="fragment"><p>Change factor level values: Modify the categories of a factor using <code>factor()</code> or <code>recode()</code> to rename or reorder levels for clearer analysis.</p></li>
<li class="fragment"><p>Create new columns: Generate or modify columns using <code>mutate()</code>, often by transforming or combining existing columns.</p></li>
</ul>
</section>

<section>
<section id="end-of-session-2" class="title-slide slide level1 center">
<h1>End of Session 2!</h1>
<p>Next session: Descriptive statistics and data visualization with <code>ggplot2</code> package - we’ll create visualizations to explore patterns in life satisfaction, values, and demographics across countries!</p>
</section>
<section id="to-try-at-home-exercise-1" class="slide level2">
<h2>To try at home: Exercise 1</h2>
<p>Now that we have a new file, load this new <code>wvs_cleaned_v1.csv</code> into a new dataframe called <code>wvs_cleaned</code>. Filter to respondents from Singapore who are currently employed full time. Show only the Respondent ID, country, the employment status, and age. Use <code>glimpse()</code> or <code>print()</code> to check the result! (you can chain these functions at the end)</p>
<p><strong>Step 1</strong>: Load the new file</p>
<div class="cell">
<details class="code-fold">
<summary>Show answer</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb33-2"><a></a>wvs_cleaned <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data-output/wvs_cleaned_v1.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section class="slide level2">

<p><strong>Step 2</strong>: Do the filtering and selecting, and then show result</p>
<div class="cell">
<details class="code-fold">
<summary>Show answer</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb34-2"><a></a>wvs_cleaned <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data-output/wvs_cleaned_v1.csv"</span>)</span>
<span id="cb34-3"><a></a></span>
<span id="cb34-4"><a></a>wvs_cleaned <span class="sc">|&gt;</span> </span>
<span id="cb34-5"><a></a>    <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"SGP"</span> <span class="sc">&amp;</span> employment <span class="sc">==</span> <span class="st">"Full time"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-6"><a></a>    <span class="fu">select</span>(ID, country, employment, age) <span class="sc">|&gt;</span> </span>
<span id="cb34-7"><a></a>    <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 857
Columns: 4
$ ID         &lt;dbl&gt; 702071000, 702070773, 702070363, 702070746, 702070026, 7020…
$ country    &lt;chr&gt; "SGP", "SGP", "SGP", "SGP", "SGP", "SGP", "SGP", "SGP", "SG…
$ employment &lt;chr&gt; "Full time", "Full time", "Full time", "Full time", "Full t…
$ age        &lt;dbl&gt; 81, 79, 73, 70, 69, 68, 68, 68, 68, 68, 68, 67, 67, 67, 67,…</code></pre>
</div>
</div>
</section>
<section id="to-try-at-home-exercise-2" class="slide level2">
<h2>To try at home: Exercise 2</h2>
<p><u><strong>Time: 5 minutes</strong></u></p>
<p>Generate a summary stats of <code>age</code> grouped by <code>country</code> and <code>sex</code>. The summary stats should include mean, median, max, min, std, and n (number of observations). It should look something like this:</p>
<div class="cell">
<details class="code-fold">
<summary>Show answer</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a></a>    <span class="fu">group_by</span>(country, sex) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a></a>    <span class="fu">summarise</span>(<span class="at">observation =</span> <span class="fu">n</span>(), </span>
<span id="cb36-4"><a></a>              <span class="at">mean_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb36-5"><a></a>              <span class="at">median_age =</span> <span class="fu">median</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb36-6"><a></a>              <span class="at">oldest =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb36-7"><a></a>              <span class="at">youngest =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb36-8"><a></a>              <span class="at">std_dev =</span> <span class="fu">sd</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>



</section><section id="to-try-at-home-exercise-2-output" class="slide level2 output-location-slide"><h2>To try at home: Exercise 2</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
# Groups:   country [3]
  country sex    observation mean_age median_age oldest youngest std_dev
  &lt;chr&gt;   &lt;chr&gt;        &lt;int&gt;    &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
1 CAN     Female        1959     44.2         42     89       18    17.0
2 CAN     Male          2059     48.8         49     93       18    16.4
3 NZL     Female         354     56.6         58     91       19    15.5
4 NZL     Male           306     57.3         59     88       20    15.4
5 SGP     Female         919     47.7         47     87       21    15.3
6 SGP     Male           806     47.9         48     90       21    16.2</code></pre>
</div>
</div></section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/smu logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://bellaratmelia.github.io/introductory-r-socsci/">Introductory R for Social Science</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/bellaratmelia\.github\.io\/introductory-r-socsci\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>