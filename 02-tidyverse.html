<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <meta name="author" content="Bella Ratmelia">
  <title>Introductory R for Social Sciences – Data Wrangling with Tidyverse</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-3c65e30e28be6599f015f6cc207dd28b.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-G5L1RGYC4H"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
   
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'analytics_storage': 'denied'
    });
  gtag('config', 'G-G5L1RGYC4H', { 'anonymize_ip': true});
  </script>
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Wrangling with Tidyverse</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Bella Ratmelia 
</div>
</div>
</div>

</section>
<section id="todays-outline" class="slide level2">
<h2>Today’s Outline</h2>
<ol type="1">
<li>Loading our data into RStudio environment</li>
<li>Data wrangling with <code>dplyr</code> and <code>tidyr</code> (part of the <code>tidyverse</code> package)</li>
</ol>
</section>
<section id="checklist-when-you-start-rstudio" class="slide level2">
<h2>Checklist when you start RStudio</h2>
<ul>
<li>Load the project we created last session and open the R script file.</li>
<li>Make sure that <code>Environment</code> panel is empty (click on broom icon to clean it up)</li>
<li>Clear the <code>Console</code> and <code>Plots</code> too.</li>
<li>Re-run the <code>library(tidyverse)</code> and <code>read_csv</code> portion in the previous session</li>
</ul>
</section>
<section id="refresher-loading-from-csv-into-a-dataframe" class="slide level2">
<h2>Refresher: Loading from CSV into a dataframe</h2>
<p>Use <code>read_csv</code> from <code>readr</code> package (part of <code>tidyverse</code>) to load our World Values Survey data. More information about the data can be found under the <code>Dataset</code> tab in the course website.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># import tidyverse library</span></span>
<span id="cb1-2"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a><span class="co"># read the CSV and save into a dataframe called wvs_data</span></span>
<span id="cb1-5"><a></a>wvs_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/wvs-wave7-sg-ca-nz.csv"</span>)</span>
<span id="cb1-6"><a></a></span>
<span id="cb1-7"><a></a><span class="co"># "peek" at the data, pay attention to the data types!</span></span>
<span id="cb1-8"><a></a><span class="fu">glimpse</span>(wvs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cleaning-data-for-analysis" class="slide level2">
<h2>Cleaning data for analysis</h2>
<div>
<ul>
<li class="fragment"><strong>Why do it in R?</strong> Because it’s much efficient to do so in R, especially if your data is large (e.g.&nbsp;millions of rows, hundreds of columns) and you have repetitive clean up tasks.</li>
<li class="fragment">Incorrect or inconsistent data can lead to false conclusions, so it’s important to clean and prep it correctly.</li>
<li class="fragment">Having a clear understanding of the desired data shape is essential as real data often differs from what you imagine! <strong>Refer to codebook, actual questionnaire, appendix for guidance.</strong></li>
<li class="fragment">Data cleaning techniques differ based on the problems, data type, and the research questions you are trying to answer. Various methods are available, each with its own trade-offs.</li>
</ul>
</div>
</section>
<section id="about-dplyr-and-tidyr" class="slide level2">
<h2>About dplyr and tidyr</h2>
<ul>
<li><p>Packages from <code>tidyverse</code>. (<a href="https://www.tidyverse.org/">click here to go to the tidyverse homepage</a>)</p></li>
<li><p>Posit have created cheatsheets here! (you can have this open in another tab for reference for this session!)</p>
<ul>
<li><p><a href="https://rstudio.github.io/cheatsheets/html/data-transformation.html">dplyr cheatsheet</a> | <a href="https://rstudio.github.io/cheatsheets/data-transformation.pdf">pdf version</a> (I personally prefer this PDF version since it’s more visual)</p></li>
<li><p><a href="https://rstudio.github.io/cheatsheets/html/tidyr.html">tidyr cheatsheet</a> | <a href="https://rstudio.github.io/cheatsheets/tidyr.pdf">pdf version</a></p></li>
</ul></li>
</ul>
</section>
<section id="prelim-checks-for-your-data" class="slide level2">
<h2>Prelim checks for your data</h2>
<p>It’s good practice to do some preliminary checks on your data to get a better sense of it!</p>
<p>A few things that you can do:</p>
<ul>
<li><p>Check for duplicates</p></li>
<li><p>Check for missing values</p></li>
<li><p>Check on overall distributions of the categorical data</p></li>
<li><p>Plot the distribution of the numerical/continuous data</p></li>
</ul>
</section>
<section>
<section id="data-wrangling-activities-with-wvs-data" class="title-slide slide level1 center">
<h1>Data wrangling activities with WVS data</h1>
<p><strong>Scenario</strong>: We are research assistants analyzing patterns in values and satisfaction across different countries and demographic groups. Our team wants to understand how life satisfaction relates to various factors like employment, marital status, and religiosity.</p>
<p>Tasks we need to complete:</p>
<div>
<ol type="1">
<li class="fragment"><p>Remove all rows with missing values (NA)</p></li>
<li class="fragment"><p>Create a demographics-only dataset with variables like country, sex, age, marital_status, and employment</p></li>
<li class="fragment"><p>Filter for respondents aged 30 or older, arrange by age (oldest to youngest)</p></li>
<li class="fragment"><p>Convert categorical variables (country, religiousity, sex, marital_status, employment) to factors</p></li>
<li class="fragment"><p>Create age groups: “18-29”, “30-44”, “45-59”, “60+”</p></li>
</ol>
</div>
</section>
<section class="slide level2">

<div>
<ol start="6" type="1">
<li class="fragment"><p>Create a new column <code>high_satisfaction</code> that is TRUE if life_satisfaction is above the median</p></li>
<li class="fragment"><p>Reverse code scales for all the <code>importance</code> variables so that higher numbers consistently represent higher levels of the measured construct. In other words, 1 = Not at all important and 4 = Very important.</p></li>
<li class="fragment"><p>Generate summary statistics of life_satisfaction grouped by country and employment status</p></li>
<li class="fragment"><p>Create a cross-tabulation of religiousity by country</p></li>
<li class="fragment"><p>Reshape the data to show average satisfaction scores by country and age group</p></li>
</ol>
</div>
</section></section>
<section>
<section id="lets-wrangle-our-data" class="title-slide slide level1 center">
<h1>Let’s wrangle our data!</h1>

</section>
<section id="task-1" class="slide level2">
<h2>Task #1</h2>
<blockquote>
<p><strong>A strategy I’d like to recommend:</strong> briefly read over the <code>dplyr</code> + <code>tidyr</code> documentation, either the PDF or HTML version, and have them open on a separate tab so that you can refer to it quickly.</p>
</blockquote>
<p>Remove all rows with empty values (NA)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number of observations after removing NAs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">dim</span>(wvs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6403   16</code></pre>
</div>
</div>
</section>
<section id="interlude-pipe-operator" class="slide level2">
<h2>Interlude: Pipe Operator ( |&gt; )</h2>
<ul>
<li><p>The pipe operator (|&gt;) allows us to chain multiple operations without creating intermediate dataframes.</p></li>
<li><p>Super handy when we perform several data wrangling tasks using tidyverse in sequence.</p></li>
<li><p>Helps with readability, especially for complex operations.</p></li>
<li><p>Keyboard shortcut: <code>Ctrl</code>+<code>Shift</code>+<code>M</code> on Windows, <code>Cmd</code>+<code>Shift</code>+<code>M</code> on Mac</p></li>
</ul>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Without pipe operator</a></li><li><a href="#tabset-1-2">With pipe operator</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>Notice that we have to create a “temp” dataframes called <code>age_df</code> and <code>age_df_desc</code> in this method.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>age_df <span class="ot">&lt;-</span> <span class="fu">filter</span>(wvs_data, age <span class="sc">&gt;=</span> <span class="dv">30</span>)</span>
<span id="cb5-2"><a></a>age_df_desc <span class="ot">&lt;-</span> <span class="fu">arrange</span>(age_df, <span class="fu">desc</span>(age))</span>
<span id="cb5-3"><a></a><span class="fu">write_csv</span>(age_df_desc, <span class="st">"data-output/wvs-30plus.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2">
<p>No “temp” dataframe needed here! :D</p>
<div class="sourceCode" id="cb6" data-code-overflow="overflow"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a></a>    <span class="fu">filter</span>(age <span class="sc">&gt;=</span> <span class="dv">30</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(age)) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a></a>    <span class="fu">write_csv</span>(<span class="st">"data-output/wvs-30plus.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="task-2" class="slide level2">
<h2>Task #2</h2>
<p>Create a demographics-only dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>demographics_df <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a></a>    <span class="fu">select</span>(country, sex, age, marital_status, employment) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a></a>    <span class="fu">write_csv</span>(<span class="st">"data-output/wvs_demographics.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First few rows of the demographics data:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 5
  country sex      age marital_status             employment       
  &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                      &lt;chr&gt;            
1 CAN     Female    76 Separated                  Retired/pensioned
2 CAN     Male      69 Married                    Retired/pensioned
3 CAN     Female    35 Living together as married Part time        
# ℹ 6,400 more rows</code></pre>
</div>
</div>
</section>
<section id="task-3" class="slide level2">
<h2>Task #3:</h2>
<p>Filter for 30+ age group and sort by age:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>wvs_30plus <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a></a>    <span class="fu">filter</span>(age <span class="sc">&gt;=</span> <span class="dv">30</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(age)) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a></a>    <span class="fu">write_csv</span>(<span class="st">"data-output/wvs_30plus.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview of the filtered data:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5,319 × 3
  country   age employment       
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;            
1 CAN        93 Part time        
2 NZL        91 Retired/pensioned
3 SGP        90 Retired/pensioned
# ℹ 5,316 more rows</code></pre>
</div>
</div>
</section>
<section id="group-exercise-1-5-minutes" class="slide level2">
<h2>Group Exercise 1 (5 minutes)</h2>
<p>Find all respondents who are: - From Singapore - Employed full-time - Have high life satisfaction (8 or higher) Save their country, employment, life_satisfaction, and freedom scores, arranged by life_satisfaction in descending order.</p>
<div class="cell">
<details class="code-fold">
<summary>Show answer</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>singapore_satisfied <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a></a>    <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"SGP"</span> <span class="sc">&amp;</span> </span>
<span id="cb11-3"><a></a>           employment <span class="sc">==</span> <span class="st">"Full time"</span> <span class="sc">&amp;</span> </span>
<span id="cb11-4"><a></a>           life_satisfaction <span class="sc">&gt;=</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a></a>    <span class="fu">select</span>(country, employment, life_satisfaction, freedom) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(life_satisfaction))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Preview:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 361 × 4
  country employment life_satisfaction freedom
  &lt;chr&gt;   &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
1 SGP     Full time                 10       1
2 SGP     Full time                 10      10
3 SGP     Full time                 10      10
# ℹ 358 more rows</code></pre>
</div>
</div>
</section>
<section id="task-4" class="slide level2">
<h2>Task #4:</h2>
<p>Convert categorical variables to factors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>cols_to_factor <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"religiousity"</span>, <span class="st">"sex"</span>, </span>
<span id="cb13-2"><a></a>                    <span class="st">"marital_status"</span>, <span class="st">"employment"</span>)</span>
<span id="cb13-3"><a></a></span>
<span id="cb13-4"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(cols_to_factor), as.factor))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Checking the structure:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>tibble [6,403 × 5] (S3: tbl_df/tbl/data.frame)
 $ country       : Factor w/ 3 levels "CAN","NZL","SGP": 1 1 1 1 1 1 1 1 1 1 ...
 $ religiousity  : Factor w/ 4 levels "A religious person",..: 1 1 2 1 4 2 2 1 4 1 ...
 $ sex           : Factor w/ 2 levels "Female","Male": 1 2 1 2 2 2 2 1 2 2 ...
 $ marital_status: Factor w/ 6 levels "Divorced","Living together as married",..: 4 3 2 3 1 3 3 3 6 5 ...
 $ employment    : Factor w/ 8 levels "Full time","Homemaker not otherwise employed",..: 5 5 4 1 1 1 6 8 6 1 ...</code></pre>
</div>
</div>
</section>
<section id="task-5" class="slide level2">
<h2>Task #5</h2>
<p>Add age groups to our dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a></a>    <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb15-3"><a></a>        age <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"18-29"</span>,</span>
<span id="cb15-4"><a></a>        age <span class="sc">&lt;</span> <span class="dv">45</span> <span class="sc">~</span> <span class="st">"30-44"</span>,</span>
<span id="cb15-5"><a></a>        age <span class="sc">&lt;</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">"45-59"</span>,</span>
<span id="cb15-6"><a></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"60+"</span></span>
<span id="cb15-7"><a></a>    ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview of age groups:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 2
    age age_group
  &lt;dbl&gt; &lt;chr&gt;    
1    76 60+      
2    69 60+      
3    35 30-44    
4    45 45-59    
# ℹ 6,399 more rows</code></pre>
</div>
</div>
</section>
<section id="task-6" class="slide level2">
<h2>Task #6</h2>
<p>Create a new column <code>high_satisfaction</code> that is TRUE if life_satisfaction is above the median:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="co"># Calculate median life satisfaction</span></span>
<span id="cb17-2"><a></a>median_satisfaction <span class="ot">&lt;-</span> <span class="fu">median</span>(wvs_data<span class="sc">$</span>life_satisfaction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-3"><a></a></span>
<span id="cb17-4"><a></a><span class="co"># Create the high_satisfaction column</span></span>
<span id="cb17-5"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb17-6"><a></a>    <span class="fu">mutate</span>(<span class="at">high_satisfaction =</span> life_satisfaction <span class="sc">&gt;</span> median_satisfaction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Preview of satisfaction categorization:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 2
   life_satisfaction high_satisfaction
               &lt;dbl&gt; &lt;lgl&gt;            
 1                 5 FALSE            
 2                 8 TRUE             
 3                 9 TRUE             
 4                 7 FALSE            
 5                 1 FALSE            
 6                 7 FALSE            
 7                 9 TRUE             
 8                 6 FALSE            
 9                 7 FALSE            
10                 6 FALSE            
11                 7 FALSE            </code></pre>
</div>
</div>
</section>
<section id="task-7" class="slide level2">
<h2>Task #7</h2>
<p>In survey data, we often need to reverse code scales so that higher numbers consistently represent higher levels of the measured construct. In our WVS data:</p>
<p>Original importance scale:</p>
<ul>
<li><p>1 = Very Important</p></li>
<li><p>2 = Rather Important</p></li>
<li><p>3 = Not Very Important</p></li>
<li><p>4 = Not at all Important</p></li>
</ul>
<p>Let’s create reverse-coded versions where 4 = highest importance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a></a>    <span class="fu">mutate</span>(</span>
<span id="cb20-3"><a></a>        <span class="co"># Reverse code each importance variable (5 minus original value)</span></span>
<span id="cb20-4"><a></a>        <span class="at">family_importance_r =</span> <span class="dv">5</span> <span class="sc">-</span> family_importance,</span>
<span id="cb20-5"><a></a>        <span class="at">friends_importance_r =</span> <span class="dv">5</span> <span class="sc">-</span> friends_importance,</span>
<span id="cb20-6"><a></a>        <span class="at">leisure_importance_r =</span> <span class="dv">5</span> <span class="sc">-</span> leisure_importance,</span>
<span id="cb20-7"><a></a>        <span class="at">work_importance_r =</span> <span class="dv">5</span> <span class="sc">-</span> work_importance</span>
<span id="cb20-8"><a></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<p>Preview of original vs reverse-coded scales:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 8
  family_importance family_importance_r friends_importance friends_importance_r
              &lt;dbl&gt;               &lt;dbl&gt;              &lt;dbl&gt;                &lt;dbl&gt;
1                 1                   4                  1                    4
2                 1                   4                  1                    4
3                 2                   3                  2                    3
# ℹ 6,400 more rows
# ℹ 4 more variables: leisure_importance &lt;dbl&gt;, leisure_importance_r &lt;dbl&gt;,
#   work_importance &lt;dbl&gt;, work_importance_r &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="task-8" class="slide level2">
<h2>Task #8</h2>
<p>Save all our changes to a new CSV file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="co"># Save the processed data</span></span>
<span id="cb22-2"><a></a><span class="fu">write_csv</span>(wvs_data, <span class="st">"data-output/wvs_processed.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check the <code>data-output</code> folder to see if the CSV has been properly created!</p>
</section>
<section id="task-9" class="slide level2">
<h2>Task #9</h2>
<p>generate satisfaction statistics by country and employment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>wvs_data <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a></a>    <span class="fu">group_by</span>(country, employment) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a></a>    <span class="fu">summarise</span>(</span>
<span id="cb23-4"><a></a>        <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb23-5"><a></a>        <span class="at">mean_satisfaction =</span> <span class="fu">mean</span>(life_satisfaction),</span>
<span id="cb23-6"><a></a>        <span class="at">median_satisfaction =</span> <span class="fu">median</span>(life_satisfaction),</span>
<span id="cb23-7"><a></a>        <span class="at">sd_satisfaction =</span> <span class="fu">sd</span>(life_satisfaction)</span>
<span id="cb23-8"><a></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb23-9"><a></a>    <span class="fu">arrange</span>(country, <span class="fu">desc</span>(mean_satisfaction))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="task-9-output" class="slide level2 output-location-slide"><h2>Task #9</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 6
# Groups:   country [3]
   country employment                    n mean_satisfaction median_satisfaction
   &lt;fct&gt;   &lt;fct&gt;                     &lt;int&gt;             &lt;dbl&gt;               &lt;dbl&gt;
 1 CAN     Retired/pensioned           914              7.58                 8  
 2 CAN     Self employed               225              7.32                 8  
 3 CAN     Full time                  1808              7.10                 7  
 4 CAN     Homemaker not otherwise …   143              6.96                 7  
 5 CAN     Part time                   290              6.92                 7  
 6 CAN     Student                     320              6.53                 7  
 7 CAN     Other                        78              5.87                 6.5
 8 CAN     Unemployed                  240              5.53                 6  
 9 NZL     Self employed                 7              8.71                 9  
10 NZL     Retired/pensioned           179              8                    8  
# ℹ 14 more rows
# ℹ 1 more variable: sd_satisfaction &lt;dbl&gt;</code></pre>
</div>
</div></section><section id="task-10" class="slide level2">
<h2>Task #10</h2>
<p>Create a country by religiosity cross-tabulation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>wvs_data <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a></a>    <span class="fu">group_by</span>(country, religiousity) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb25-5"><a></a>        <span class="at">names_from =</span> religiousity,</span>
<span id="cb25-6"><a></a>        <span class="at">values_from =</span> count,</span>
<span id="cb25-7"><a></a>        <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb25-8"><a></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb25-9"><a></a>    knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<colgroup>
<col style="width: 11%">
<col style="width: 26%">
<col style="width: 15%">
<col style="width: 31%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">A religious person</th>
<th style="text-align: right;">An atheist</th>
<th style="text-align: right;">Not a religious person</th>
<th style="text-align: right;">Don’t know</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CAN</td>
<td style="text-align: right;">1406</td>
<td style="text-align: right;">818</td>
<td style="text-align: right;">1794</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">NZL</td>
<td style="text-align: right;">209</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">310</td>
<td style="text-align: right;">44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SGP</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">172</td>
<td style="text-align: right;">563</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="long-vs-wide-data" class="slide level2">
<h2>Long vs Wide Data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Long data:</strong></p>
<ul>
<li><p>Each row is a unique observation.</p></li>
<li><p>There is a separate column indicating the variable or type of measurements</p></li>
<li><p>This format is more “understandable” by R, more suitable for visualizations.</p></li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Wide data:</strong></p>
<ul>
<li><p>Each row is a unique observation.</p></li>
<li><p>Each column is a variable –&gt; the more variables you have, the “wider” is the data</p></li>
<li><p>This format is more intuitive for humans!</p></li>
</ul>
</div></div>
</section>
<section id="long-vs-wide-data-examples" class="slide level2">
<h2>Long vs Wide Data: Examples</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Long data:</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   country religiousity           count
   &lt;fct&gt;   &lt;fct&gt;                  &lt;int&gt;
 1 CAN     A religious person      1406
 2 CAN     An atheist               818
 3 CAN     Not a religious person  1794
 4 NZL     A religious person       209
 5 NZL     An atheist                97
 6 NZL     Don't know                44
 7 NZL     Not a religious person   310
 8 SGP     A religious person       990
 9 SGP     An atheist               172
10 SGP     Not a religious person   563</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Wide data:</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  country `A religious person` `An atheist` Not a religious perso…¹ `Don't know`
  &lt;fct&gt;                  &lt;int&gt;        &lt;int&gt;                   &lt;int&gt;        &lt;int&gt;
1 CAN                     1406          818                    1794           NA
2 NZL                      209           97                     310           44
3 SGP                      990          172                     563           NA
# ℹ abbreviated name: ¹​`Not a religious person`</code></pre>
</div>
</div>
</div></div>
</section>
<section id="group-exercise-3-solo-attempts-ok" class="slide level2">
<h2>Group exercise 3 (solo attempts ok)</h2>
<p><u><strong>Time: 5 minutes</strong></u></p>
<p>Generate a summary stats of <code>age</code> grouped by <code>country</code> and <code>sex</code>. The summary stats should include mean, median, max, min, std, and n (number of observations). It should look something like this:</p>
<div class="cell">
<details class="code-fold">
<summary>Show answer</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a></a>    <span class="fu">group_by</span>(country, sex) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a></a>    <span class="fu">summarise</span>(<span class="at">observation =</span> <span class="fu">n</span>(), </span>
<span id="cb28-4"><a></a>              <span class="at">mean_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-5"><a></a>              <span class="at">median_age =</span> <span class="fu">median</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb28-6"><a></a>              <span class="at">oldest =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-7"><a></a>              <span class="at">youngest =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-8"><a></a>              <span class="at">std_dev =</span> <span class="fu">sd</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

</section>
<section id="group-exercise-3-solo-attempts-ok-output" class="slide level2 output-location-slide"><h2>Group exercise 3 (solo attempts ok)</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
# Groups:   country [3]
  country sex    observation mean_age median_age oldest youngest std_dev
  &lt;fct&gt;   &lt;fct&gt;        &lt;int&gt;    &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
1 CAN     Female        1959     44.2         42     89       18    17.0
2 CAN     Male          2059     48.8         49     93       18    16.4
3 NZL     Female         354     56.6         58     91       19    15.5
4 NZL     Male           306     57.3         59     88       20    15.4
5 SGP     Female         919     47.7         47     87       21    15.3
6 SGP     Male           806     47.9         48     90       21    16.2</code></pre>
</div>
</div></section><section id="bonus-deleting-columns-from-dataframe" class="slide level2">
<h2>Bonus: Deleting columns from dataframe</h2>
<p>Let’s say I have this column called <code>wrong_column</code> that I want to remove:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">wrong_column =</span> <span class="st">"random values"</span>)</span>
<span id="cb30-2"><a></a>wvs_data <span class="sc">|&gt;</span> <span class="fu">select</span>(country, wrong_column) <span class="sc">|&gt;</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 2
  country wrong_column 
  &lt;fct&gt;   &lt;chr&gt;        
1 CAN     random values
2 CAN     random values
3 CAN     random values
# ℹ 6,400 more rows</code></pre>
</div>
</div>
</section>
<section id="remove-the-wrong-column-with-subset--" class="slide level2">
<h2>Remove the wrong column with subset <code>-</code>:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>wvs_data <span class="ot">&lt;-</span> wvs_data <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a></a>    <span class="fu">select</span>(<span class="sc">-</span>wrong_column)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,403 × 1
  country
  &lt;fct&gt;  
1 CAN    
2 CAN    
3 CAN    
# ℹ 6,400 more rows</code></pre>
</div>
</div>
</section></section>
<section id="end-of-session-2" class="title-slide slide level1 center">
<h1>End of Session 2!</h1>
<p>Next session: Descriptive statistics and data visualization with <code>ggplot2</code> package - we’ll create visualizations to explore patterns in life satisfaction, values, and demographics across countries!</p>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/smu logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://bellaratmelia.github.io/introductory-r-socsci/">Introductory R for Social Science</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/bellaratmelia\.github\.io\/introductory-r-socsci\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>