{
  "hash": "5372166eec64529849e045ed693b3ec5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Visualization and Descriptive Stats\"\nauthor: \"Bella Ratmelia\"\nformat: revealjs\n---\n\n\n\n## Today's Outline\n\n1.  Descriptive Statistics\n2.  Data Visualization in ggplot using World Values Survey data, including guidelines on how to choose the appropriate visualization.\n\n## Checklist when you start RStudio\n\n-   Load the project we created last session and open the R script file.\n-   Make sure that `Environment` panel is empty (click on broom icon to clean it up)\n-   Clear the `Console` and `Plots` too.\n-   Re-run the `library(tidyverse)` and `read_csv` portion in the previous session\n\n## Refresher: Loading from CSV into a dataframe\n\nUse `read_csv` from `readr` package (part of `tidyverse`) to load our data into a dataframe\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# import tidyverse library\nlibrary(tidyverse)\n\n# read the CSV with WVS data\nwvs_data <- read_csv(\"data-output/wvs_processed.csv\")\n\n# Convert categorical variables to factors\nwvs_data <- wvs_data |> \n    mutate(across(c(\"country\", \"sex\", \"marital_status\", \"employment\", \"religiousity\"), as.factor))\n\n# peek at the data, pay attention to the data types!\nglimpse(wvs_data)\n```\n:::\n\n\n\n## Basic R Functions for Descriptive Statistics\n\nDescriptive statistics provide summaries about the sample and observations made. These summaries can be quantitative (summary statistics) or visual (graphs).\n\nLet's explore some basic R functions for descriptive statistics using our Chile voting data.\n\n-   `mean()`: arithmetic average\n-   `median()`: middle value\n-   `sd()`: standard deviation\n-   `var()`: variance\n-   `range()`: range of values\n-   `IQR()`: interquartile range\n-   `summary()`: provides a summary of descriptive statistics\n-   `Mode()` function from `DescTools` package: the most frequently occuring value [^1]\n\n[^1]: R doesn't have built-in functions for mode, so we need `DescTools` package to get this function\n\n## Exploring Age Distribution\n\nLet's start by examining the `age` variable in our dataset.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nlibrary(DescTools)\n\n# Basic statistics\nmean_age <- mean(wvs_data$age, na.rm = TRUE)\nmedian_age <- median(wvs_data$age, na.rm = TRUE)\nsd_age <- sd(wvs_data$age, na.rm = TRUE)\nrange_age <- range(wvs_data$age, na.rm = TRUE)\niqr_age <- IQR(wvs_data$age, na.rm = TRUE)\nmode_age <- DescTools::Mode(wvs_data$age, na.rm = TRUE)\n\n# Print results\ncat(\"Mean age:\", mean_age, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMean age: 47.96408 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Median age:\", median_age, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMedian age: 48 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Standard deviation of age:\", sd_age, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nStandard deviation of age: 16.72144 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Range of age:\", range_age[1], \"to\", range_age[2], \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRange of age: 18 to 93 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Interquartile range of age:\", iqr_age, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nInterquartile range of age: 28 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Most frequently occuring age:\", mode_age, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMost frequently occuring age: 54 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Summary statistics\nsummary(wvs_data$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  18.00   34.00   48.00   47.96   62.00   93.00 \n```\n\n\n:::\n:::\n\n\n\n## Interpreting Age Statistics\n\nSome possible interpretation:\n\n-   The mean (47.99) and median (48) are very close, suggesting a fairly symmetric distribution\n\n-   The mode (54) is slightly higher than both mean and median\n\n-   With SD = 16.74, about two-thirds of participants fall between 31.26 and 64.72 years old (mean Â± 1 SD)\n\n-   The distribution spans from 18 to 93 years, with an interquartile range of 28 years\n\nIt's much easier if we have a graph to visualize these interpretations!\n\n## Visualizing data with ggplot\n\n-   `ggplot` is plotting package that is included inside `tidyverse` package\n\n-   works best with data in the long format, i.e., a column for all the dimensions/measures and another column for the value for each dimension/measure.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nwvs_data |> \n    ggplot(aes(x = age)) +\n    geom_bar(fill = \"lightblue\") +\n    labs(title = \"Age distribution of respondents\",\n         x = \"Age\",\n         y = \"Number of Respondents\") +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n\n## Anatomy of ggplot code\n\nCharts built with ggplot must include the following:\n\n``` {.r code-line-numbers=\"|1|2|3|4-6|7\"}\nwvs_data |> # <1>\n    ggplot(aes(x = age)) + # <2>\n    geom_bar(fill = \"lightblue\") + # <3>\n    labs(title = \"Age distribution of respondents\", # <4>\n         x = \"Age\", # <4>\n         y = \"Count\") + # <4>\n    theme_minimal() # <5>\n```\n\n1.  **Data** - the dataframe/tibble to visualize.\n\n2.  **Aesthetic mappings (aes)** - describes which variables are mapped to the x, y axes, alpha (transparency) and other visual aesthetics.\n\n3.  **Geometric objects (geom)** - describes how values are rendered; as bars, scatterplot, lines, etc.\n\n4.  Provide titles and labels to your graph\n\n5.  (Optional) apply a theme/look to your graph\n\n## Going back to our data\n\nOur research team wants to understand patterns in life satisfaction and values across different countries and demographic groups. Let's create visualizations to address these questions:\n\n1.  What's the distribution of `life_satisfaction` scores across all respondents?\n2.  How does `religiousity` vary across the three countries?\n3.  What's the distribution of `employment_status` by country?\n4.  Is there a relationship between `political_scale` and `life_satisfaction`?\n5.  How do `importance` ratings (family, friends, leisure, work) compare across `employment` status?\n6.  Does `financial_satisfaction` correlate with `life satisfaction`? How does this vary by `country`?\n\n## Tip: open the ggplot cheatsheet\n\n::: callout-tip\n**A strategy I'd like to recommend:** briefly read over the `ggplot2` documentation and have them open on a separate tab. Figure out the type of variables you need to visualize (discrete or continuous) to quickly identify which visualization would make sense.\n:::\n\n![](images/ggplot-cheatsheet.jpg){width=\"60%\"}\n\n[ggplot documentation link](https://rstudio.github.io/cheatsheets/html/data-visualization.html)\n\n## Task #1\n\nWhat's the distribution of `life_satisfaction` scores?\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# One continuous variable\nwvs_data |> \n    ggplot(aes(x = life_satisfaction)) +\n    geom_histogram(binwidth = 1, fill = \"pink\", color = \"maroon\") +\n    labs(title = \"Distribution of Life Satisfaction Scores\",\n       x = \"Life Satisfaction (1-10)\",\n       y = \"Count\")\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n\n## Task #2\n\nWhat's the distribution of `religiousity`? Does it vary by country?\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# One discrete/categorical variable\nwvs_data |> \n    ggplot(aes(x = country, fill = religiousity)) +\n    geom_bar(position = \"fill\") +\n    labs(title = \"Distribution of Religiosity Across Countries\",\n       x = \"Country\",\n       y = \"Proportion\",\n       fill = \"Religious Identity\") +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n\n## Task #3\n\nWhat's the distribution of `employment_status` by country?\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# Showing proportions / percentage as part of whole\n# Two categorical variables\nwvs_data |> \n    ggplot(aes(x = country, fill = employment)) +\n    geom_bar(position = \"dodge\") +\n    labs(title = \"Employment Status Distribution by Country\",\n       x = \"Country\",\n       y = \"Count\") +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n\n## Group exercise #1 (solo attempts also ok)\n\nVisualize marital status distribution by sex, showing the proportion for each gender.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code  code-fold=\"true\"}\nwvs_data |>\n    ggplot(aes(x = sex, fill = marital_status)) +\n    geom_bar(position = \"fill\") + \n    labs(title = \"Proportion of Marital Status by Gender\",\n       x = \"Sex\",\n       y = \"Proportion\",\n       fill = \"Marital Status\") +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n\n## Task #4\n\nIs there a relationship between `political_scale` and `life_satisfaction`?\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# Two variables - both continuous\nwvs_data |>\n    ggplot(aes(x = political_scale, y = life_satisfaction)) +\n    geom_jitter(alpha = 0.3) +\n    geom_smooth(method = \"lm\", color = \"red\") +\n    labs(title = \"Political Leaning vs Life Satisfaction\",\n       x = \"Political Leaning\",\n       y = \"Life Satisfaction\")\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n\n## Task #5\n\nHow do `religiousity` compare across `marital_status`?\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# Two categorical variables: marital status and religiosity\nwvs_data |> \n    ggplot(aes(x = marital_status, fill = religiousity)) +\n    geom_bar(position = \"fill\") +\n    labs(title = \"Religious Identity Distribution by Marital Status\",\n         x = \"Marital Status\",\n         y = \"Proportion\",\n         fill = \"Religious Identity\") +\n    theme_minimal() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n\n\n## Facets for multiple variables\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# Faceting and multiple variables\nwvs_data |> \n    ggplot(aes(x = marital_status, fill = religiousity)) +\n    geom_bar(position = \"fill\") +\n    labs(title = \"Religious Identity Distribution by Marital Status\",\n         x = \"Marital Status\",\n         y = \"Count\",\n         fill = \"Religious Identity\") +\n    facet_grid( ~ country) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n\n## Task #6\n\nDoes `financial_satisfaction` correlate with `life satisfaction`? How does this vary by `country`?\n\nLet's layer two kinds of visualization here:\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\n# Two continuous variables with grouping\nwvs_data |> \n    ggplot(aes(x = financial_satisfaction, y = life_satisfaction, color = country)) +\n    geom_point(alpha = 0.3) +\n    geom_smooth(method = \"lm\", se = FALSE) +\n    facet_wrap(~ country) +\n    labs(title = \"Life Satisfaction vs Financial Satisfaction by Country\",\n       x = \"Financial Satisfaction\",\n       y = \"Life Satisfaction\")\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\n\n## Group Exercise #2\n\nCreate a violin plot showing the distribution of freedom scores by employment status, with points overlaid.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code  code-fold=\"true\"}\nwvs_data |> \n    ggplot(aes(x = employment, y = freedom)) +\n    geom_violin(fill = \"lightblue\") +\n    geom_jitter(alpha = 0.2, color = \"navy\") + \n    labs(title = \"Distribution of Freedom Scores by Employment Status\",\n       x = \"Employment Status\",\n       y = \"Freedom Score\") +\n    theme_minimal() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n\n## Group Exercise #3\n\nVisualize the distribution of employment status across marital status categories, and use faceting to compare this relationship across countries.\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code  code-fold=\"true\"}\nwvs_data |> \n    ggplot(aes(x = marital_status, fill = employment)) +\n    geom_bar(position = \"fill\") +\n    facet_wrap(~ country) + \n    labs(title = \"Employment Status Distribution by Marital Status and Country\",\n       x = \"Marital Status\",\n       y = \"Proportion\",\n       fill = \"Employment Status\") +\n    theme_minimal() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](03-visualization_files/figure-revealjs/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n\n## Is fancier = better?\n\nFancier, more complicated visualization does not necessarily mean better!\n\nTake a look at this award-winning visualization by [Simon Scarr](http://www.simonscarr.com/iraqs-bloody-toll)\n\n\n\n```{=html}\n<iframe width=\"1500\" height=\"600\" src=\"http://www.simonscarr.com/iraqs-bloody-toll\" title=\"Simon Scarr's visualization\"></iframe>\n```\n\n\n\n## Strategy for data visualization with ggplot\n\n1.  Have the ggplot documentation/cheatsheet open\n2.  Decide on how many variables are involved. Is it just one? two? more than two?\n3.  Determine whether the variables are categorical or continuous. If you have more than one, are they both categorical? one categorical + one continuous?\n4.  Refer to the documentation to see which type of visualization would make sense for your variables.\n\n# End of Session 3!\n\nCheck out the [R Graph gallery](https://r-graph-gallery.com/) for inspiration and code samples!\n\nNext session: statistical tests in R using WVS data\n",
    "supporting": [
      "03-visualization_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}